2026-01-10: Refactored ML feature extraction into `ml_utils.py` to eliminate code duplication. Fixed critical runtime bugs in `batch_loader.py` and `api.py`. Cleaned up linting errors (score 9.09/10).
2026-01-10: Ran Bear Market Backtest (Jan 3, 2022). Result: 0/6 profitable, Avg PnL: -6.10%. Top momentum signals (ONTO, AOSL, AMBA) saw double-digit drawdowns. Strategy is highly vulnerable to market regime changes.
2026-01-10: Ran Bull Market Backtest (Jan 3, 2024). Result: 8/10 profitable (80% Win Rate), Avg PnL: +0.09%. Strategy captures steady uptrends but gains were small. Confirms high sensitivity to market regime.
2026-01-10: Ran Chop Market Backtest (Jan 3, 2023). Result: 4/5 profitable (80% Win Rate), Avg PnL: +3.49%. Strong performance from BA and SHYF, but many high-scoring symbols resulted in 'no_entry', indicating entry logic might be too tight for volatile sideways markets.
2026-01-11: Resuming historical backfill from symbol 'DLS' with optimized rate (2s sleep). Cleared stale lock file.
2026-01-12: Performed extensive linting cleanup across core and data modules. Fixed unused imports, trailing whitespace, missing final newlines, and split long lines in symbols.py and service.py. Improved linting score to 8.97/10.
2026-01-13 17:16:46: Resolved all linting issues across the codebase. Refactored core, data, analysis, and utility scripts to reduce complexity (too-many-locals, too-many-branches, etc.) and achieved 10/10 Pylint rating for all modified files.
2026-01-13: Enhanced Bear Market Resilience. Improved MarketRegime with EMA 50/200 and Breadth checks. Implemented regime-based skipping for Momentum strategy. Tightened overextension penalties and enabled mandatory weekly uptrend for momentum signals. (Ref: todo.txt)
2026-01-13 (Session Shutdown): Verified stability (linting and all tests passed). Synced progress to documentation and committed changes.
2026-01-14: Performed Data Quality Audit (`check_data_completeness.py`). Identified 1,191 symbols with >50% price spikes, caused by unadjusted stock splits in raw data.
2026-01-14: Fixed Critical Data Bug. Switched `historical_data.py` and `symbols.py` to use `TIME_SERIES_DAILY_ADJUSTED`. Implemented logic to back-adjust Open/High/Low using the Split/Dividend factor. Verified fix on AMZN (2022 split) and NFLX (2015 split).
2026-01-14: Initiated V2 Full Backfill. Cleared legacy checkpoint. Started background process (PID via Docker) to backfill 10,000+ symbols with split-adjusted data.
2026-01-14: Implemented HTML Reporting (`html_reporter.py`). Updated `SwingTrader` to return structured data and `main.py` to generate rich HTML reports with Market Regime, Candidates, and Indicators.
2026-01-14: Implemented FastAPI infrastructure (Phase 4). Created `bluehorseshoe.api` with Pydantic models. Updated Dockerfile to serve the new API on port 8001. Identified critical blocking issue: synchronous prediction logic in `SwingTrader` halts the API event loop (~20m block). Added `Async API Prediction` to roadmap. Verified stability (Tests Passed, Lint 9.95/10).
2026-01-16: Implemented Async Task Queue (Phase 4). Added Redis as broker and Celery as worker. Refactored `SwingTrader` to support progress callbacks. Updated FastAPI routes to support async prediction submissions and status polling with real-time progress updates. Verified stability (All tests passed).
2026-01-16: Verified logging configuration. Confirmed src/logs/blueHorseshoe.log is writable and cleared stale content. Daily Scheduler is ready to take over data updates.
2026-01-16: Relaxed Market Regime constraint. Modified `SwingTrader` to allow "Baseline" (Trend) candidates even in Bearish markets, treating regime as a warning rather than a blocker. Verified with new test case.
2026-01-16: Validated Mean Reversion Strategy. Backtest (Oct 2025 - Jan 2026) showed 53% win rate and +6.57% Avg PnL (vs 0 trades for baseline). Confirmed efficacy in volatile/choppy markets.
2026-01-16: Updated HTML Report Layout. Made "Market Regime" section collapsible with dynamic status header to improve report readability.
2026-01-17 (Session Shutdown): Enhanced HTML report with collapsible Market Regime section (defaulting to closed). Implemented `-r` flag to regenerate reports from stored scores, decoupling reporting from prediction. Fixed a critical data bug where insufficient SPY/QQQ history (100 days) caused market regime analysis to fail; implemented targeted full backfill (`-b --symbols`) and corrected CLI argument parsing. Verified stability (all tests pass, linting clean).2026-01-17: Improved HTML Report UI. Inlined 'Market Regime' header with the collapse caret and adjusted spacing to match H2 headers.
2026-01-17: Enhanced HTML Report with 'Top 5' side-by-side lists for Baseline and Mean Reversion. Updated main.py to load ML probabilities during report regeneration.
2026-01-17: Added POST /pipeline/run endpoint to manually trigger the full daily pipeline (Update -> Predict -> Report).
2026-01-17: Verified and optimized historical data loading (`historical_data.py`) to skip already up-to-date symbols during recent updates (`-u`). Fixed logging configuration in `src/main.py` to ensure visibility.