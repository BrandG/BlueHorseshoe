# Share Calculator Widget - Quick Guide

## What Was Added

A **Quick Share Calculator** widget has been added to all BlueHorseshoe HTML reports. It appears right after the Market Regime section, before the Top 5 lists.

## Location

The calculator appears in every HTML report generated by BlueHorseshoe:
- **File:** `src/logs/report_YYYY-MM-DD.html`
- **Position:** Between Market Regime and Top 5 Candidates sections

## Features

### Inputs
1. **Investment Amount ($)** - How much money you want to invest
2. **Entry Price ($)** - The stock's entry price

### Outputs (Calculated Automatically)
1. **Fractional Shares** - Exact shares (e.g., 4.073 shares)
2. **Whole Shares** - Rounded down (e.g., 4 shares)
3. **Cost (Fractional)** - Total cost with fractional shares
4. **Cost (Whole)** - Total cost with whole shares only
5. **Leftover** - Money remaining if buying whole shares only

### Features
- ✅ **Auto-calculates** as you type (no button needed)
- ✅ **Dark mode support** (matches theme toggle)
- ✅ **Mobile-friendly** responsive design
- ✅ **Precise** calculations (3 decimal precision for fractional)

## Usage Examples

### Example 1: Simple Calculation

**Input:**
- Investment Amount: `$200`
- Entry Price: `$75.34`

**Output:**
```
Fractional Shares:  2.655 shares
Whole Shares:       2 shares
Cost (Fractional):  $200.00
Cost (Whole):       $150.68
Leftover:           $49.32
```

### Example 2: High-Priced Stock

**Input:**
- Investment Amount: `$500`
- Entry Price: `$276.49`

**Output:**
```
Fractional Shares:  1.808 shares
Whole Shares:       1 shares
Cost (Fractional):  $500.00
Cost (Whole):       $276.49
Leftover:           $223.51
```

### Example 3: Exact Fit

**Input:**
- Investment Amount: `$301.36`
- Entry Price: `$75.34`

**Output:**
```
Fractional Shares:  4.000 shares
Whole Shares:       4 shares
Cost (Fractional):  $301.36
Cost (Whole):       $301.36
Leftover:           $0.00
```

## How It Works

**Formula:**
```
Shares = Investment Amount / Entry Price
```

**Simple and fast** - no risk calculations, just basic division:
- Want to invest $200 in a $50 stock? **4 shares**
- Want to invest $100 in a $75 stock? **1.333 shares**

## When To Use

### Use the Widget When:
- ✅ You have a fixed dollar amount to invest
- ✅ You want to quickly see fractional vs whole shares
- ✅ You're comparing different stocks in the report
- ✅ You want a simple, fast calculation

### Use Position Sizer Tools When:
- ✅ You need risk-based position sizing (% of capital at risk)
- ✅ You want to calculate based on stop-loss levels
- ✅ You need to track total portfolio risk
- ✅ You want ATR-based entry/stop/target calculation

## Comparison: Calculator vs Position Sizers

| Feature | Widget | position_sizer_enhanced.py | quick_size.py |
|---------|--------|---------------------------|---------------|
| **Location** | In HTML report | CLI tool | CLI tool |
| **Input** | $ amount + price | Account size + risk % + levels | Paste signal |
| **Output** | Shares | Shares + risk analysis | Shares |
| **Use Case** | Quick check | Full position sizing | Daily trades |
| **Risk Management** | No | Yes | Yes |
| **Fractional/Whole** | Both shown | Both supported | Fractional default |

## Design

The calculator matches BlueHorseshoe's report style:
- **Light mode:** Clean white background
- **Dark mode:** Automatically switches with theme toggle
- **Responsive:** Works on desktop, tablet, mobile
- **Integrated:** Seamlessly fits into existing layout

## Technical Details

- **Language:** Pure JavaScript (no dependencies)
- **Update:** Real-time (calculates on input)
- **Precision:** 3 decimal places for shares, 2 for dollars
- **Validation:** Handles invalid inputs gracefully

## Future Enhancements (Ideas)

Potential additions if needed:
- [ ] Pre-fill from clicked candidate
- [ ] Save calculation to clipboard
- [ ] Multiple stock comparison
- [ ] Risk % calculation mode
- [ ] Position cost as % of account

## Testing

To see the calculator in action:

```bash
# Generate new report
docker exec bluehorseshoe python src/main.py -r 2026-02-05

# Open in browser
# File: /root/BlueHorseshoe/src/logs/report_2026-02-05.html
```

The calculator will appear right below the Market Regime section!

---

**Now you can quickly calculate share quantities without leaving the report!**
