2026-01-04 12:45:09,339 - INFO - Starting ML Overlay training with limit=5000...
2026-01-04 12:45:09,339 - INFO - Training GENERAL model...
2026-01-04 12:45:09,340 - INFO - Gathering graded trades for strategy=None...
2026-01-04 12:45:09,526 - INFO - Found 5000 scores to grade. Grouping by symbol...
2026-01-04 12:45:09,543 - INFO - Connected to MongoDB server version 7.0.28
2026-01-04 12:45:10,923 - INFO - Processed 100/4146 symbols...
2026-01-04 12:45:12,303 - INFO - Processed 200/4146 symbols...
2026-01-04 12:45:13,560 - INFO - Processed 300/4146 symbols...
2026-01-04 12:45:14,903 - INFO - Processed 400/4146 symbols...
2026-01-04 12:45:15,920 - INFO - Processed 500/4146 symbols...
2026-01-04 12:45:17,194 - INFO - Processed 600/4146 symbols...
2026-01-04 12:45:18,471 - INFO - Processed 700/4146 symbols...
2026-01-04 12:45:19,579 - INFO - Processed 800/4146 symbols...
2026-01-04 12:45:20,506 - INFO - Processed 900/4146 symbols...
2026-01-04 12:45:21,377 - INFO - Processed 1000/4146 symbols...
2026-01-04 12:45:22,492 - INFO - Processed 1100/4146 symbols...
2026-01-04 12:45:23,933 - INFO - Processed 1200/4146 symbols...
2026-01-04 12:45:25,344 - INFO - Processed 1300/4146 symbols...
2026-01-04 12:45:26,678 - INFO - Processed 1400/4146 symbols...
2026-01-04 12:45:27,950 - INFO - Processed 1500/4146 symbols...
2026-01-04 12:45:29,050 - INFO - Processed 1600/4146 symbols...
2026-01-04 12:45:30,092 - INFO - Processed 1700/4146 symbols...
2026-01-04 12:45:30,955 - INFO - Processed 1800/4146 symbols...
2026-01-04 12:45:31,826 - INFO - Processed 1900/4146 symbols...
2026-01-04 12:45:32,626 - INFO - Processed 2000/4146 symbols...
2026-01-04 12:45:33,873 - INFO - Processed 2100/4146 symbols...
2026-01-04 12:45:35,464 - INFO - Processed 2200/4146 symbols...
2026-01-04 12:45:36,883 - INFO - Processed 2300/4146 symbols...
2026-01-04 12:45:38,270 - INFO - Processed 2400/4146 symbols...
2026-01-04 12:45:39,630 - INFO - Processed 2500/4146 symbols...
2026-01-04 12:45:41,012 - INFO - Processed 2600/4146 symbols...
2026-01-04 12:45:42,267 - INFO - Processed 2700/4146 symbols...
2026-01-04 12:45:43,529 - INFO - Processed 2800/4146 symbols...
2026-01-04 12:45:44,629 - INFO - Processed 2900/4146 symbols...
2026-01-04 12:45:45,658 - INFO - Processed 3000/4146 symbols...
2026-01-04 12:45:46,855 - INFO - Processed 3100/4146 symbols...
2026-01-04 12:45:47,904 - INFO - Processed 3200/4146 symbols...
2026-01-04 12:45:49,035 - INFO - Processed 3300/4146 symbols...
2026-01-04 12:45:49,949 - INFO - Processed 3400/4146 symbols...
2026-01-04 12:45:50,856 - INFO - Processed 3500/4146 symbols...
2026-01-04 12:45:51,622 - INFO - Processed 3600/4146 symbols...
2026-01-04 12:45:52,582 - INFO - Processed 3700/4146 symbols...
2026-01-04 12:45:54,230 - INFO - Processed 3800/4146 symbols...
2026-01-04 12:45:55,810 - INFO - Processed 3900/4146 symbols...
2026-01-04 12:45:57,375 - INFO - Processed 4000/4146 symbols...
2026-01-04 12:45:58,856 - INFO - Processed 4100/4146 symbols...
2026-01-04 12:46:30,644 - INFO - Training on 2552 samples, testing on 638 samples...
2026-01-04 12:46:31,075 - INFO - 
              precision    recall  f1-score   support

           0       0.70      0.84      0.77       357
           1       0.73      0.55      0.63       281

    accuracy                           0.71       638
   macro avg       0.72      0.70      0.70       638
weighted avg       0.72      0.71      0.71       638

2026-01-04 12:46:31,090 - INFO - Top Features:
           feature  importance
10       MarketCap    0.142121
9         Industry    0.140845
11            Beta    0.108057
8           Sector    0.083870
13  SentimentScore    0.082518
0            trend    0.079441
12         PERatio    0.077075
4   moving_average    0.074634
5         momentum    0.058873
1           volume    0.048331
2026-01-04 12:46:31,130 - INFO - Model saved to src/models/ml_overlay_v1.joblib
2026-01-04 12:46:31,132 - INFO - Training BASELINE model...
2026-01-04 12:46:31,132 - INFO - Gathering graded trades for strategy=baseline...
2026-01-04 12:46:31,441 - INFO - Found 5000 scores to grade. Grouping by symbol...
2026-01-04 12:46:32,526 - INFO - Processed 100/4200 symbols...
2026-01-04 12:46:33,900 - INFO - Processed 200/4200 symbols...
2026-01-04 12:46:34,992 - INFO - Processed 300/4200 symbols...
2026-01-04 12:46:36,450 - INFO - Processed 400/4200 symbols...
2026-01-04 12:46:37,526 - INFO - Processed 500/4200 symbols...
2026-01-04 12:46:38,438 - INFO - Processed 600/4200 symbols...
2026-01-04 12:46:40,090 - INFO - Processed 700/4200 symbols...
2026-01-04 12:46:41,661 - INFO - Processed 800/4200 symbols...
2026-01-04 12:46:42,814 - INFO - Processed 900/4200 symbols...
2026-01-04 12:46:43,942 - INFO - Processed 1000/4200 symbols...
2026-01-04 12:46:44,737 - INFO - Processed 1100/4200 symbols...
2026-01-04 12:46:45,694 - INFO - Processed 1200/4200 symbols...
2026-01-04 12:46:47,386 - INFO - Processed 1300/4200 symbols...
2026-01-04 12:46:48,990 - INFO - Processed 1400/4200 symbols...
2026-01-04 12:46:50,518 - INFO - Processed 1500/4200 symbols...
2026-01-04 12:46:51,784 - INFO - Processed 1600/4200 symbols...
2026-01-04 12:46:52,995 - INFO - Processed 1700/4200 symbols...
2026-01-04 12:46:54,123 - INFO - Processed 1800/4200 symbols...
2026-01-04 12:46:55,188 - INFO - Processed 1900/4200 symbols...
2026-01-04 12:46:56,231 - INFO - Processed 2000/4200 symbols...
2026-01-04 12:46:57,085 - INFO - Processed 2100/4200 symbols...
2026-01-04 12:46:57,824 - INFO - Processed 2200/4200 symbols...
2026-01-04 12:46:58,633 - INFO - Processed 2300/4200 symbols...
2026-01-04 12:46:59,613 - INFO - Processed 2400/4200 symbols...
2026-01-04 12:47:01,153 - INFO - Processed 2500/4200 symbols...
2026-01-04 12:47:03,071 - INFO - Processed 2600/4200 symbols...
2026-01-04 12:47:04,787 - INFO - Processed 2700/4200 symbols...
2026-01-04 12:47:06,261 - INFO - Processed 2800/4200 symbols...
2026-01-04 12:47:07,653 - INFO - Processed 2900/4200 symbols...
2026-01-04 12:47:09,104 - INFO - Processed 3000/4200 symbols...
2026-01-04 12:47:10,541 - INFO - Processed 3100/4200 symbols...
2026-01-04 12:47:11,846 - INFO - Processed 3200/4200 symbols...
2026-01-04 12:47:13,015 - INFO - Processed 3300/4200 symbols...
2026-01-04 12:47:14,276 - INFO - Processed 3400/4200 symbols...
2026-01-04 12:47:15,421 - INFO - Processed 3500/4200 symbols...
2026-01-04 12:47:16,450 - INFO - Processed 3600/4200 symbols...
2026-01-04 12:47:17,534 - INFO - Processed 3700/4200 symbols...
2026-01-04 12:47:18,668 - INFO - Processed 3800/4200 symbols...
2026-01-04 12:47:19,778 - INFO - Processed 3900/4200 symbols...
2026-01-04 12:47:20,653 - INFO - Processed 4000/4200 symbols...
2026-01-04 12:47:21,492 - INFO - Processed 4100/4200 symbols...
2026-01-04 12:47:22,329 - INFO - Processed 4200/4200 symbols...
2026-01-04 12:47:55,077 - INFO - Training on 2952 samples, testing on 738 samples...
2026-01-04 12:47:55,556 - INFO - 
              precision    recall  f1-score   support

           0       0.69      0.80      0.74       399
           1       0.72      0.58      0.64       339

    accuracy                           0.70       738
   macro avg       0.70      0.69      0.69       738
weighted avg       0.70      0.70      0.70       738

2026-01-04 12:47:55,573 - INFO - Top Features:
           feature  importance
8         Industry    0.151079
9        MarketCap    0.130614
10            Beta    0.107169
12  SentimentScore    0.082698
7           Sector    0.081853
0            trend    0.078721
11         PERatio    0.075336
4   moving_average    0.073758
1           volume    0.054486
5         momentum    0.050820
2026-01-04 12:47:55,616 - INFO - Model saved to src/models/ml_overlay_baseline.joblib
2026-01-04 12:47:55,617 - INFO - Training MEAN REVERSION model...
2026-01-04 12:47:55,618 - INFO - Gathering graded trades for strategy=mean_reversion...
2026-01-04 12:47:55,758 - INFO - Found 5000 scores to grade. Grouping by symbol...
2026-01-04 12:47:56,964 - INFO - Processed 100/4213 symbols...
2026-01-04 12:47:58,159 - INFO - Processed 200/4213 symbols...
2026-01-04 12:47:59,180 - INFO - Processed 300/4213 symbols...
2026-01-04 12:48:00,583 - INFO - Processed 400/4213 symbols...
2026-01-04 12:48:01,762 - INFO - Processed 500/4213 symbols...
2026-01-04 12:48:02,761 - INFO - Processed 600/4213 symbols...
2026-01-04 12:48:04,400 - INFO - Processed 700/4213 symbols...
2026-01-04 12:48:05,738 - INFO - Processed 800/4213 symbols...
2026-01-04 12:48:06,861 - INFO - Processed 900/4213 symbols...
2026-01-04 12:48:07,792 - INFO - Processed 1000/4213 symbols...
2026-01-04 12:48:08,595 - INFO - Processed 1100/4213 symbols...
2026-01-04 12:48:09,439 - INFO - Processed 1200/4213 symbols...
2026-01-04 12:48:10,967 - INFO - Processed 1300/4213 symbols...
2026-01-04 12:48:12,526 - INFO - Processed 1400/4213 symbols...
2026-01-04 12:48:13,899 - INFO - Processed 1500/4213 symbols...
2026-01-04 12:48:15,172 - INFO - Processed 1600/4213 symbols...
2026-01-04 12:48:16,351 - INFO - Processed 1700/4213 symbols...
2026-01-04 12:48:17,380 - INFO - Processed 1800/4213 symbols...
2026-01-04 12:48:18,383 - INFO - Processed 1900/4213 symbols...
2026-01-04 12:48:19,521 - INFO - Processed 2000/4213 symbols...
2026-01-04 12:48:20,430 - INFO - Processed 2100/4213 symbols...
2026-01-04 12:48:21,250 - INFO - Processed 2200/4213 symbols...
2026-01-04 12:48:22,008 - INFO - Processed 2300/4213 symbols...
2026-01-04 12:48:22,839 - INFO - Processed 2400/4213 symbols...
2026-01-04 12:48:24,137 - INFO - Processed 2500/4213 symbols...
2026-01-04 12:48:25,902 - INFO - Processed 2600/4213 symbols...
2026-01-04 12:48:27,495 - INFO - Processed 2700/4213 symbols...
2026-01-04 12:48:29,092 - INFO - Processed 2800/4213 symbols...
2026-01-04 12:48:30,586 - INFO - Processed 2900/4213 symbols...
2026-01-04 12:48:31,970 - INFO - Processed 3000/4213 symbols...
2026-01-04 12:48:33,390 - INFO - Processed 3100/4213 symbols...
2026-01-04 12:48:34,734 - INFO - Processed 3200/4213 symbols...
2026-01-04 12:48:36,066 - INFO - Processed 3300/4213 symbols...
2026-01-04 12:48:37,390 - INFO - Processed 3400/4213 symbols...
2026-01-04 12:48:38,675 - INFO - Processed 3500/4213 symbols...
2026-01-04 12:48:39,868 - INFO - Processed 3600/4213 symbols...
2026-01-04 12:48:40,965 - INFO - Processed 3700/4213 symbols...
2026-01-04 12:48:41,932 - INFO - Processed 3800/4213 symbols...
2026-01-04 12:48:42,897 - INFO - Processed 3900/4213 symbols...
2026-01-04 12:48:43,787 - INFO - Processed 4000/4213 symbols...
2026-01-04 12:48:44,611 - INFO - Processed 4100/4213 symbols...
2026-01-04 12:48:45,524 - INFO - Processed 4200/4213 symbols...
2026-01-04 12:48:51,890 - INFO - Training on 534 samples, testing on 134 samples...
2026-01-04 12:48:52,110 - INFO - 
              precision    recall  f1-score   support

           0       0.77      0.92      0.84        84
           1       0.79      0.54      0.64        50

    accuracy                           0.78       134
   macro avg       0.78      0.73      0.74       134
weighted avg       0.78      0.78      0.76       134

2026-01-04 12:48:52,123 - INFO - Top Features:
              feature  importance
4                Beta    0.157810
3           MarketCap    0.149926
6      SentimentScore    0.148213
2            Industry    0.134168
7   bonus_oversold_bb    0.109127
5             PERatio    0.096440
1              Sector    0.084407
0       bonus_ma_dist    0.072730
8         candlestick    0.025773
9  bonus_oversold_rsi    0.021406
2026-01-04 12:48:52,157 - INFO - Model saved to src/models/ml_overlay_mean_reversion.joblib
2026-01-04 12:48:52,157 - INFO - Training process complete.
