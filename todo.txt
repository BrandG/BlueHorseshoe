# ToDo: Indicator Analysis & Strategy Optimization

## Current State (v1.7)
- **ML Overlay v1.1:** 70% Accuracy model deployed. Predictive features dominated by Industry, Market Cap, and Beta.
- **ML Stop Loss v1.0:** Regressor implemented to predict volatility-adjusted drawdown (MAE).
- **Trailing Stops:** Implemented in Backtester (2.0 * ATR default).
- **Data Infrastructure:** Full backfill of Fundamental and News data for 6.7k symbols completed. Automated retraining implemented.

## Performance Baseline (H2 2025 Stress Test)
- **Baseline (Trend):** 56.10% Win Rate | 0.86% Avg PnL (H2 2025)
- **Mean Reversion (Dip):** 51.06% Win Rate | -0.20% Avg PnL (H2 2025)
- **Nov 2025 Flash Test:** MR (76% WR, 4.8% PnL) vs Baseline (36% WR, -1.5% PnL)

## Advanced Trading Architecture Improvements
- [x] **Strategy Divorce:** Separate logic for Trend-Following and Mean-Reversion.
- [x] **ML Overlay v1.1:** 70% Accuracy Random Forest model integrated into daily predictions.
- [x] **Fundamental Data Integration:** Added Sector, Industry, and Market Cap to features.
- [x] **News Sentiment Integration:** Added AlphaVantage news feed support.
- [x] **Automated Retraining:** Weekly job implemented in `src/cron_weekly_retrain.sh` and `maintenance.py`.
- [x] **ML-Driven Stop Loss:** Regressor predicts optimal ATR multiplier per symbol.
- [x] **Trailing Stops:** Implement a 2.0 * ATR trailing stop for the `Backtester`.
- [x] **Data Alignment:** Unified historical data into `historical_prices` collection and backfilled 2000+ symbols.
- [x] **Score Rebuild (Jan 2025):** Initiated background rebuild for training data generation.

## Data Infrastructure & Deep Backtesting

- [x] **Full History Backfill:** Incrementally run `python src/main.py -b` to build a multi-year historical database (currently only 2025+ is reliable).

- [x] **Debug Stuck Symbols:** Investigate why symbols like AACBR remain incomplete after backfill.

- [x] **Staleness Analysis:** Identify and remove symbols with significant data gaps or low-quality historical records.

- [x] **Optimized Backfill:** Implement a batching mechanism in `historical_data.py` to allow resuming full builds from the last successful symbol.

- [x] **Data Completeness Check:** Verify that all 6.7k symbols have `atr_14` and other indicators pre-calculated for the entire 2025 period.



## Future Ideas / Next Phase

- [ ] **Data Quality Audit:** Scan the newly backfilled data for gaps, spikes, or anomalies now that we have deep history.

- [ ] **Feature Engineering:** Re-run feature generation on the full historical dataset to train more robust ML models.

- [ ] **Deep Backtesting:** Run strategy simulations over 5-10 year periods to validate performance across different market regimes.

- [x] **H2 2025 Stress Test:** Perform 6-month simulation for both strategies with refreshed models.

- [x] **Intraday Verification:** Implemented `-i` flag in CLI to check live status of predictions using yfinance.

- [x] **Strategy Optimization:** Relaxed Baseline entry logic to capture strong momentum (gap-up) plays.



## Completed Tasks

- [x] Implement Machine Learning Overlay.

- [x] Integrated News Sentiment and Fundamentals.

- [x] Implement a weekly automated retraining job.

- [x] Implement ML-Driven Stop Loss.

- [x] Implement Trailing Stops.

- [x] Implement Intraday Verification Mechanism.

- [x] Complete Full Historical Data Backfill.
